{
  "hash": "cc5d7d1cce12a1b7c6ce85c5325c7bd2",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Ciencia de Datos para Economistas\"\nsubtitle: \"Clase 21- Gráficos con `ggplot2`\"\ndate: \"27, january 2025\"\nauthor: \"MSc. José M. Avendaño\"\n# output:\n#   html_document:\n#     toc: yes\n#     incremental: true\n# filters:\n#   - webr\nformat:\n  revealjs:\n    incremental: true  \n# execute: \n#   echo: true\n  # eval: false\n---\n\n::: {.cell}\n\n:::\n\n\n\n## Objetivo\n\nConocer el sistema de graficación en R llamado `ggplot2` , con énfasis en los mapeos estéticos, y los principales geoms que se pueden usar para realizar la visualización de datos.\n\n## Previo a Generar un Gráfico\n\n1.  Identificar el tipo de gráfico que queremos usar\n2.  Implementar la GG\n3.  Iterar con múltiples opciones de visualización\n4.  Seleccionar la representación que codifique de mejor la información que queremos representar\n5.  Incorporar elementos al tema como colores, paletas, fuentes\n\n## *ggplot2*\n\nSistema para crear gráficos **declarativamente** basado en la \"gramática de los gráficos\" (Wilkinson, 2005).\n\nUsted proporciona los datos, le dice a ggplot2 cómo asignar variables a la estética, qué primitivas gráficas utilizar, y él se encarga de los detalles.\n\n## La Gramática de ggplot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"elugcxlnbe\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#elugcxlnbe table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#elugcxlnbe thead, #elugcxlnbe tbody, #elugcxlnbe tfoot, #elugcxlnbe tr, #elugcxlnbe td, #elugcxlnbe th {\n  border-style: none;\n}\n\n#elugcxlnbe p {\n  margin: 0;\n  padding: 0;\n}\n\n#elugcxlnbe .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#elugcxlnbe .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#elugcxlnbe .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#elugcxlnbe .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#elugcxlnbe .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#elugcxlnbe .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#elugcxlnbe .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#elugcxlnbe .gt_col_heading {\n  color: #FFFFFF;\n  background-color: #2C7DA0;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#elugcxlnbe .gt_column_spanner_outer {\n  color: #FFFFFF;\n  background-color: #2C7DA0;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#elugcxlnbe .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#elugcxlnbe .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#elugcxlnbe .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#elugcxlnbe .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#elugcxlnbe .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#elugcxlnbe .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#elugcxlnbe .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#elugcxlnbe .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#elugcxlnbe .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#elugcxlnbe .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#elugcxlnbe .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#elugcxlnbe .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#elugcxlnbe .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#elugcxlnbe .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#elugcxlnbe .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#elugcxlnbe .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#elugcxlnbe .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#elugcxlnbe .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#elugcxlnbe .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#elugcxlnbe .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#elugcxlnbe .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#elugcxlnbe .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#elugcxlnbe .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#elugcxlnbe .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#elugcxlnbe .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#elugcxlnbe .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#elugcxlnbe .gt_left {\n  text-align: left;\n}\n\n#elugcxlnbe .gt_center {\n  text-align: center;\n}\n\n#elugcxlnbe .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#elugcxlnbe .gt_font_normal {\n  font-weight: normal;\n}\n\n#elugcxlnbe .gt_font_bold {\n  font-weight: bold;\n}\n\n#elugcxlnbe .gt_font_italic {\n  font-style: italic;\n}\n\n#elugcxlnbe .gt_super {\n  font-size: 65%;\n}\n\n#elugcxlnbe .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#elugcxlnbe .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#elugcxlnbe .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#elugcxlnbe .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#elugcxlnbe .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#elugcxlnbe .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#elugcxlnbe .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#elugcxlnbe .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#elugcxlnbe div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Componente\">Componente</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Funcion\">Funcion</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Descripción\">Descripción</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"C\">C</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Componente\" class=\"gt_row gt_left\" style=\"background-color: #D8F3DC;\"><span data-qmd-base64=\"RGF0b3M=\"><span class='gt_from_md'>Datos</span></span></td>\n<td headers=\"Funcion\" class=\"gt_row gt_left\" style=\"background-color: #D8F3DC;\"><span data-qmd-base64=\"PGNvZGU+Z2dwbG90KGRhdGEpPC9jb2RlPg==\"><span class='gt_from_md'><code>ggplot(data)</code></span></span></td>\n<td headers=\"Descripción\" class=\"gt_row gt_left\" style=\"background-color: #D8F3DC;\"><span data-qmd-base64=\"bG9zIGRhdG9zIHF1ZSBzZSB2YW4gYSB2aXN1YWxpemFy\"><span class='gt_from_md'>los datos que se van a visualizar</span></span></td>\n<td headers=\"C\" class=\"gt_row gt_left\" style=\"background-color: #D8F3DC;\"><span data-qmd-base64=\"4pyF\"><span class='gt_from_md'>✅</span></span></td></tr>\n    <tr><td headers=\"Componente\" class=\"gt_row gt_left\" style=\"background-color: #D8F3DC;\"><span data-qmd-base64=\"RXN0w6l0aWNh\"><span class='gt_from_md'>Estética</span></span></td>\n<td headers=\"Funcion\" class=\"gt_row gt_left\" style=\"background-color: #D8F3DC;\"><span data-qmd-base64=\"PGNvZGU+YWVzKCk8L2NvZGU+\"><span class='gt_from_md'><code>aes()</code></span></span></td>\n<td headers=\"Descripción\" class=\"gt_row gt_left\" style=\"background-color: #D8F3DC;\"><span data-qmd-base64=\"ZWwgbWFwZW8gZXN0w6l0aWNvIHF1ZSBoYWNlIGVudHJlIGxhcyB2YXJpYWJsZXMgeSBsYSByZXByZXNlbnRhY2nDs24gdmlzdWFs\"><span class='gt_from_md'>el mapeo estético que hace entre las variables y la representación visual</span></span></td>\n<td headers=\"C\" class=\"gt_row gt_left\" style=\"background-color: #D8F3DC;\"><span data-qmd-base64=\"4pyF\"><span class='gt_from_md'>✅</span></span></td></tr>\n    <tr><td headers=\"Componente\" class=\"gt_row gt_left\" style=\"background-color: #D8F3DC;\"><span data-qmd-base64=\"R2VvbWV0csOtYXM=\"><span class='gt_from_md'>Geometrías</span></span></td>\n<td headers=\"Funcion\" class=\"gt_row gt_left\" style=\"background-color: #D8F3DC;\"><span data-qmd-base64=\"PGNvZGU+Z2VvbV8qPC9jb2RlPg==\"><span class='gt_from_md'><code>geom_*</code></span></span></td>\n<td headers=\"Descripción\" class=\"gt_row gt_left\" style=\"background-color: #D8F3DC;\"><span data-qmd-base64=\"bGFzIGZvcm1hcyBnZW9tw6l0cmljYXMgdXNhZGFzIHBhcmEgcmVwcmVzZW50YXIgbG9zIGRhdG9z\"><span class='gt_from_md'>las formas geométricas usadas para representar los datos</span></span></td>\n<td headers=\"C\" class=\"gt_row gt_left\" style=\"background-color: #D8F3DC;\"><span data-qmd-base64=\"4pyF\"><span class='gt_from_md'>✅</span></span></td></tr>\n    <tr><td headers=\"Componente\" class=\"gt_row gt_left\"><span data-qmd-base64=\"RXN0YWTDrXN0aWNhcw==\"><span class='gt_from_md'>Estadísticas</span></span></td>\n<td headers=\"Funcion\" class=\"gt_row gt_left\"><span data-qmd-base64=\"PGNvZGU+c3RhdF8qPC9jb2RlPg==\"><span class='gt_from_md'><code>stat_*</code></span></span></td>\n<td headers=\"Descripción\" class=\"gt_row gt_left\"><span data-qmd-base64=\"bGFzIHRyYW5zZm9ybWFjaW9uZXMgZXN0YWTDrXN0aWNhcyBhcGxpY2FkYXMgYSBsb3MgZGF0b3MgY29tbyBiaW5uaW5nLCBjdWFudGlsZXMsIGFsaXNhZG8=\"><span class='gt_from_md'>las transformaciones estadísticas aplicadas a los datos como binning, cuantiles, alisado</span></span></td>\n<td headers=\"C\" class=\"gt_row gt_left\"><span data-qmd-base64=\"4puU77iP\"><span class='gt_from_md'>⛔️</span></span></td></tr>\n    <tr><td headers=\"Componente\" class=\"gt_row gt_left\"><span data-qmd-base64=\"RXNjYWxhcw==\"><span class='gt_from_md'>Escalas</span></span></td>\n<td headers=\"Funcion\" class=\"gt_row gt_left\"><span data-qmd-base64=\"PGNvZGU+c2NhbGVfKjwvY29kZT4=\"><span class='gt_from_md'><code>scale_*</code></span></span></td>\n<td headers=\"Descripción\" class=\"gt_row gt_left\"><span data-qmd-base64=\"bWFwZW9zIGVudHJlIGxvcyBkYXRvcyB5IGxhcyByZXByZXNlbnRhY2lvbmVzIGVuIGxvcyBlamVzIChkaW1lbnNpb25lcykuIGVqZW1wbG86IGhvbWJyZSA9IHJvam8sIG11amVyID0gYXp1bCk=\"><span class='gt_from_md'>mapeos entre los datos y las representaciones en los ejes (dimensiones). ejemplo: hombre = rojo, mujer = azul)</span></span></td>\n<td headers=\"C\" class=\"gt_row gt_left\"><span data-qmd-base64=\"4puU77iP\"><span class='gt_from_md'>⛔️</span></span></td></tr>\n    <tr><td headers=\"Componente\" class=\"gt_row gt_left\"><span data-qmd-base64=\"U2lzdGVtYSBkZSBDb29yZGVuYWRhcw==\"><span class='gt_from_md'>Sistema de Coordenadas</span></span></td>\n<td headers=\"Funcion\" class=\"gt_row gt_left\"><span data-qmd-base64=\"PGNvZGU+Y29vcmRfKjwvY29kZT4=\"><span class='gt_from_md'><code>coord_*</code></span></span></td>\n<td headers=\"Descripción\" class=\"gt_row gt_left\"><span data-qmd-base64=\"bWFwZW9zIGRlIGxvcyBkYXRvcyBkZW50cm8gZGVsIHBsYW5v\"><span class='gt_from_md'>mapeos de los datos dentro del plano</span></span></td>\n<td headers=\"C\" class=\"gt_row gt_left\"><span data-qmd-base64=\"4puU77iP\"><span class='gt_from_md'>⛔️</span></span></td></tr>\n    <tr><td headers=\"Componente\" class=\"gt_row gt_left\"><span data-qmd-base64=\"RmFjZXRhcw==\"><span class='gt_from_md'>Facetas</span></span></td>\n<td headers=\"Funcion\" class=\"gt_row gt_left\"><span data-qmd-base64=\"PGNvZGU+ZmFjZXRfKjwvY29kZT4=\"><span class='gt_from_md'><code>facet_*</code></span></span></td>\n<td headers=\"Descripción\" class=\"gt_row gt_left\"><span data-qmd-base64=\"bG9zIGFycmVnbG9zIGRlIGxvcyBkYXRvcyBkZW50cm8gZGUgdW5hIGdyaWxsYSByZWN0YW5ndWxhciBkZSBncsOhZmljb3M=\"><span class='gt_from_md'>los arreglos de los datos dentro de una grilla rectangular de gráficos</span></span></td>\n<td headers=\"C\" class=\"gt_row gt_left\"><span data-qmd-base64=\"4pyF\"><span class='gt_from_md'>✅</span></span></td></tr>\n    <tr><td headers=\"Componente\" class=\"gt_row gt_left\"><span data-qmd-base64=\"VGVtYXMgVmlzdWFsZXM=\"><span class='gt_from_md'>Temas Visuales</span></span></td>\n<td headers=\"Funcion\" class=\"gt_row gt_left\"><span data-qmd-base64=\"PGNvZGU+dGhlbWUoKTwvY29kZT4gbyA8Y29kZT50aGVtZV8qPC9jb2RlPg==\"><span class='gt_from_md'><code>theme()</code> o <code>theme_*</code></span></span></td>\n<td headers=\"Descripción\" class=\"gt_row gt_left\"><span data-qmd-base64=\"bGEgcmVwcmVzZW50YWNpw7NuIHZpc3VhbCBnZW5lcmFsIGRlbCBncsOhZmljbyAoZm9uZG8sIHRpcG8gZGUgbGV0cmFzLCBldGMuKQ==\"><span class='gt_from_md'>la representación visual general del gráfico (fondo, tipo de letras, etc.)</span></span></td>\n<td headers=\"C\" class=\"gt_row gt_left\"><span data-qmd-base64=\"4pyF\"><span class='gt_from_md'>✅</span></span></td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"4\"> tabla inspirada en trabajo de Cédric Scherer // rstudio::conf // julio 2022</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n## Ejemplo Básico {auto-animate=\"true\"}\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = gapminder_2007)\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-4-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## Ejemplo Básico {auto-animate=\"true\"}\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2,3\"}\nggplot(data = gapminder_2007,\n       mapping = aes(x = lifeExp, \n                     y = gdpPercap))\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## Ejemplo Básico {auto-animate=\"true\"}\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(data = gapminder_2007,\n       mapping = aes(x = lifeExp, \n                     y = gdpPercap))+\n  geom_point(color= \"#9d0208\")\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-8-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## Mapeos Estadísticos {auto-animate=\"true\"}\n\nUsar los datos como variables que permiten codificar las siguientes representaciones en la visualización de datos:\n\n-   Posición (x,y)\n\n-   Colores (color, fill)\n\n-   Formas (shape, linetype)\n\n-   Tamaño (size)\n\n-   Transparencia (alpha)\n\n-   Agrupamientos(group)\n\n## Geoms: Representaciones geométricas\n\n-   barra: `geom_bar`\n\n-   columna: `geom_col`\n\n-   puntos: `geom_point`\n\n-   líneas: `geom_line`\n\n-   polígonos: `geom_polygon` (no se aborda en clase)\n\n# Geoms para una sola Variable\n\n## geom_bar\n\nHace que la altura de la barra sea proporcional al número de casos de cada grupo (cuenta los casos)\n\n-   Requiere la estética `x` dentro de `aes()`\n\n-   Puede cambiar la apariencia de las barras con argumentos  `color`, `fill`, `alpha`\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(data = gapminder_2007,\n       aes(x=continent)) +\n  geom_bar()\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-10-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_bar -relleno\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(data = gapminder_2007,\n       aes(x=continent)) +\n  geom_bar(fill= \"#ffbe0b\")\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-12-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom-bar: reordenamiento {auto-animate=\"true\"}\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n-   data frame se pasa por \\`%\\>%'\n\n-   uso de la función `reorder` , barras valores descendentes\n\n-   `identity`: los datos no son alterados\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4,5,6,7,8\"}\ngapminder_2007%>%\n  group_by(continent)%>%\n  count(sort = TRUE, name='Total')%>%\n  ggplot() +\n  geom_bar(aes(x=reorder(continent,-Total), \n               y=Total ),\n           stat='identity',\n           fill= \"#ffbe0b\")\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n<br><br><br>\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-14-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n# Estadísticos\n\n## Geoms Estadísticos: Transformaciones Estadísticas\n\n-   Gráfico de distribución de frecuencia: `geom_histogram`\n\n-   Gráfico de densidad: `geom_density`\n\n-   Diagrama de caja: `geom_boxplot`\n\n-   Otros: `geom_freqpoly`, `geom_dotplot`, `geom_rug`\n\n-   Medias suavizadas: `geom_smooth`\n\n## geom_histogram\n\n<br>\n\n-   Requiere en `aes()` la variable sobre la cual se representará la distribución\n\n-   Puede cambiar la apariencia de las barras con argumentos  `color`, `fill`, `alpha`\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(data = gapminder_2007) +\n  geom_histogram(aes(x= gdpPercap))\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-16-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_histogram: color relleno\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(data = gapminder_2007,\n       aes(x= gdpPercap)) +\n  geom_histogram(fill='red')\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-18-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_histogram: cdad. barras\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(data = gapminder_2007,\n       aes(gdpPercap)) +\n  geom_histogram(bins=20,\n                 fill='#0a9396')\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-20-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_histogram: mapeo estético color borde\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(data = gapminder_2007,\n       aes(gdpPercap, \n           color=continent)) +\n  geom_histogram()\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-22-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_histogram- mapeo estético: color relleno, bins\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3,4\"}\nggplot(data = gapminder_2007,\n       aes(gdpPercap,\n           fill=continent)) +\n  geom_histogram(bins=20)\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-24-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_density\n\n-   Requiere la `x` aesthetic dentro de  `aes()`\n\n-   Modifica el suavizador del núcleo en uso con el parámetro `kernel` \n\n-   Cambia el ancho de banda con el parámetro `adjust` \n\n-   Se pueden modificar la apariencia de las barras con los argumentos `color`, `fill`, `alpha`\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(data=gapminder_2007,\n         aes(x=lifeExp))+\n  geom_density()\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-26-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_density: color y relleno, local\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(data=gapminder_2007,\n       aes(x=lifeExp,\n           color=continent))+\n  geom_density(aes(fill=continent))\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-28-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_density: alpha, local\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4,5\"}\nggplot(data=gapminder_2007,\n       aes(x=lifeExp,\n           color=continent))+\n  geom_density(aes(fill=continent),\n               alpha = 0.5)\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-30-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_boxplot\n\n<br>\n\n-   Requiere la estética `x` dentro de `aes()`\n\n-   Puede cambiar la apariencia de las barras con argumentos  `color`, `fill`, `alpha`\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(data = gapminder_2007,\n       aes(y=lifeExp)) +\n  geom_boxplot(fill= \"#fb8b24\")\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-32-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_boxplot: por variable categórica/relleno/borde\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3,4,5\"}\nggplot(data = gapminder_2007,\n       mapping = aes(x=continent, \n                     y= gdpPercap)) +\n  geom_boxplot(fill= \"#fb8b24\",\n               color='#00a6fb')\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-34-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_boxplot: representación diferenciada valores atípicos\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4,5,6\"}\nggplot(data = gapminder_2007,\n       mapping = aes(x=continent, \n                     y= gdpPercap)) +\n  geom_boxplot(fill= \"#fb8b24\",\n               outlier.colour = 'red',\n               color='#00a6fb')\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-36-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_boxplot- composición: línea y puntos\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4,6,7,8\"}\nggplot(data = gapminder_2007,\n       mapping = aes(x=continent, \n                     y= gdpPercap)) +\n  geom_point()+\n  geom_boxplot(fill= \"#fb8b24\")+\n  geom_hline(yintercept = mean(gapminder_2007$gdpPercap), \n             size = 1, \n             colour=\"#c1121f\")\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-38-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_boxplot: composición: puntos (orden)\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"5\"}\nggplot(data = gapminder_2007,\n       mapping = aes(x=continent, \n                     y= gdpPercap)) +\n  geom_boxplot(fill= \"#fb8b24\")+\n  geom_point()\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-40-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_boxplot: rotar ejes\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"5\"}\nggplot(data = gapminder_2007,\n       mapping = aes(x=continent, \n                     y= gdpPercap)) +\n  geom_boxplot(fill= \"#fb8b24\")+\n  coord_flip()\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-42-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_freqpoly\n\n<br>\n\nSe comporta igual que `geom_histogram` pero con líneas conectadas en lugar de barras  \n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(data=gapminder_2007,\n       aes(x=lifeExp))+\n  geom_freqpoly()\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-44-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_dotplot:\n\n<br>\n\nMuestra los valores en intervalos como puntos individuales\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(data=gapminder_2007,\n       aes(x=lifeExp))+\n  geom_dotplot()\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-46-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_rug\n\n<br>\n\nColoca líneas a lo largo de un eje para cada observación\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(data=gapminder_2007,\n       aes(x=lifeExp))+\n  geom_histogram()+\n  geom_rug()\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-48-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_smooth\n\n<br>\n\n-   Requiere la estética  `x, y` dentro de `aes()`\n\n-   Puede cambiar la apariencia de las barras con argumentos  `color`, `fill`, `alpha`\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2,3,4\"}\nggplot(data = gapminder,\n       mapping = aes(x = lifeExp, \n                     y = gdpPercap)) +\n  geom_smooth()\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-50-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_smooth - compuesto: puntos\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4,5\"}\nggplot(data = gapminder,\n       mapping = aes(x = lifeExp, \n                     y = gdpPercap)) +\n  geom_point( alpha = 1/5)+\n  geom_smooth()\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-52-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_smooth - local Vs. global encoding\n\n<br>\n\nGlobal Encoding\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2,3,4\"}\nggplot(data = gapminder,\n       mapping = aes(x = lifeExp, \n                     y = gdpPercap,\n                     color= continent)) +\n  geom_point()+\n  geom_smooth()\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-54-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_smooth - local Vs. global encoding\n\n<br>\n\nLocal Encoding\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(data = gapminder,\n       mapping = aes(x = lifeExp, \n                     y = gdpPercap)) +\n  geom_point(aes(color=continent))+\n  geom_smooth()\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-56-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_smooth - local encoding, lm, factor\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"6,7,8\"}\nggplot(data = gapminder,\n       mapping = aes(x = lifeExp, \n                     y = gdpPercap,\n                     color= continent)) +\n  geom_point()+\n  geom_smooth(aes(group=year,\n                  color=factor(year)), # factor\n              method='lm')\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-58-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_smooth - local encoding, linetype, color smooth\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2,3,4,5\"}\nggplot(data = gapminder) +\n  geom_smooth( mapping = aes(x = lifeExp, \n                             y = gdpPercap,\n                             linetype= continent, \n                             color=continent))\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-60-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_smooth - local encoding, agrupar, color smooth\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2,3,4,5\"}\nggplot(data = gapminder) +\n  geom_smooth( mapping = aes(x = lifeExp, \n                             y = gdpPercap,\n                             group = continent, \n                             color=continent))\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-62-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_smooth - tamaño línea,\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"7\"}\nggplot(data = gapminder) +\n  geom_smooth( mapping = aes(x = lifeExp, \n                             y = gdpPercap,\n                             group = continent, \n                             color=continent),\n               method = \"lm\",\n               size = 2)\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-64-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n# Geoms para más de una Variable\n\n## geom_col\n\n<br>\n\nLa altura de la barra representan valores en los datos\n\n-   Requiere la estética  `x, y` dentro de `aes()`\n\n-   Puede cambiar la apariencia de las barras con argumentos  `color`, `fill`, `alpha`\n\n## geom_col: ejemplo básico\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n-   detalle mapeo estético en `x` y `y`\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(data=df_gapminder_2007_america,\n       aes(x= pop,\n           y= country))+\n  geom_col()\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n-   Orden alfabético\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-66-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## Creación DF Gapminder Conteo por Continente\n\n<br>\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_continente_2007 <- gapminder_2007%>%\n  group_by(continent)%>%\n  count(sort = TRUE, name='Total')\n\ndf_continente_2007\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 × 2\n# Groups:   continent [5]\n  continent Total\n  <fct>     <int>\n1 Africa       52\n2 Asia         33\n3 Europe       30\n4 Americas     25\n5 Oceania       2\n```\n\n\n:::\n:::\n\n\n\n## geom_col: ejemplo 2\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(data=df_continente_2007,\n       aes(x= continent,\n           y= Total))+\n  geom_col()\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-69-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_col: relleno\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(data=df_continente_2007,\n       aes(x= continent,\n           y= Total))+\n  geom_col(fill= \"#ffbe0b\")\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-71-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_col: reorder\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2,3\"}\nggplot(data=df_continente_2007,\n       aes(x=reorder(continent,-Total), \n            y= Total))+\n  geom_col(fill= \"#ffbe0b\")\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-73-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_col: asignar a una variable\n\n<br>\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ngraf_gap_2007 <- ggplot(data=df_continente_2007,\n                        aes(x= continent,\n                            y= Total,\n                            fill=continent))+\n  geom_col(fill= \"#ffbe0b\")\n\ngraf_gap_2007\n```\n\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-74-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n## geom_col: temas (themes)\n\nLos temas son aplicables a cualquier geom ya que cambian aspectos generales del área del gráfico\n\n::: panel-tabset\n## bw\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ngraf_gap_2007+\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-75-1.png){width=960}\n:::\n:::\n\n\n\n## minimal\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ngraf_gap_2007+\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-76-1.png){width=960}\n:::\n:::\n\n\n\n## grey\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ngraf_gap_2007+\n  theme_grey()\n```\n\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-77-1.png){width=960}\n:::\n:::\n\n\n\n## linedraw\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ngraf_gap_2007+\n  theme_linedraw()\n```\n\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-78-1.png){width=960}\n:::\n:::\n\n\n\n## dark\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ngraf_gap_2007+\n  theme_dark()\n```\n\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-79-1.png){width=960}\n:::\n:::\n\n\n\n## light\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ngraf_gap_2007+\n  theme_light()\n```\n\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-80-1.png){width=960}\n:::\n:::\n\n\n:::\n\n## geom_col: personalizar tema\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3,4,14\"}\ngraf_gap_2007+\n  theme_dark()+\n  theme(text = element_text(family = \"serif\", \n                            size = 30))\n\n\n\n\n\n\n\n\ngraf_gap_2007+\n  guides (fill ='none')\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-82-1.png){width=960}\n:::\n\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-82-2.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_col: ajuste valores en eje y, colores relleno, etiquetas\n\n<br>\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"6,7,8,9,10,11,12,13\"}\nggplot(data=df_continente_2007,\n                        aes(x= continent,\n                            y= Total,\n                            fill=continent))+\n  geom_col()+\n  scale_y_continuous (name = NULL,\n                     breaks = seq(0, 60, by = 5))+\n  \n  labs(x = NULL,\n       title = \"Gapminder año 2007: \\nCdad. Países por Continente\")+\n  scale_fill_manual(values =  \n                      c('#fb8500','#ffb703','#023047',\n                        '#219ebc','#8ecae6' ))\n```\n\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-83-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n## geom_col: modificación etiquetas x- problema\n\n<br>\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(data=df_gapminder_2007_america, \n       aes(x=country, y= gdpPercap))+\n  geom_col()+\n  scale_y_continuous (name = NULL,\n                      breaks = seq(0, 45000, by = 5000),\n                      labels = scales::label_dollar())+\n  labs(x = NULL, \n       title = \"Gapminder año 2007: \",\n       subtitle = \"PIB Per Cápita por País América\")\n```\n\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-84-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n## geom_col: modificación etiquetas x- solución\n\n<br>\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(data=df_gapminder_2007_america, \n       aes(x=country, y= gdpPercap))+\n  geom_col()+\n  scale_y_continuous (name = NULL,\n                      breaks = seq(0, 45000, by = 5000),\n                      labels = scales::label_dollar())+\n  labs(x = NULL, \n       title = \"Gapminder año 2007: \",\n       subtitle = \"PIB Per Cápita por País América\")+\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-85-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n## geom_col: top PIB per cápita\n\n<br>\n\n¿Qué estamos representando? ¿Qué queremos transmitir?\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3,5,7,8,9,10,11,12,14,15,16,17,18,19\"}\nlibrary(viridis)\nggplot(data=df_gapminder_2007_america, \n       aes(x=reorder(country, -gdpPercap), \n           y= gdpPercap,\n           fill= country))+\n  geom_col()+\n  scale_y_continuous (breaks = seq(0, 45000, by = 5000),\n                      labels = scales::label_dollar())+\n  labs(x = NULL,\n       y=\"PIB Per Cápita en USD\",\n       title = \"TOP PIB Per Cápita por País América\",\n       subtitle = \"Datos Gapminder año 2007\")+\n  theme_light()+\n  theme(axis.text.x = element_text(angle = 45, \n                                   hjust = 1,\n                                   family = \"serif\", \n                                   size = 8),\n        legend.position = 'none')+\n  scale_fill_viridis (discrete=TRUE)\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-87-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_point\n\n-   Requiere los valores de `x, y` *aesthetics* dentro de `aes()`\n\n-   Se puede modificar la apariciencia de los puntos con los argumentos `color`, `shape`, `alpha` ,`size`\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2,3\"}\nggplot(data = gapminder_2007,\n       mapping = aes(x = lifeExp, \n                           y = gdpPercap)) +\n  geom_point()\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-89-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n::: notes\nhacernos una pregunta. hipótesis\n\ncómo es la relación entre la expectativa de vida y el pibpercap\n\ncomportamiento lineal, exponencia?\n:::\n\n## geom_point: color\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(data = gapminder_2007,\n       mapping = aes(x = lifeExp, \n                     y = gdpPercap)) +\n  geom_point(color= \"#9d0208\")\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-91-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_point: ajuste color vs. mapeo\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4,5\"}\nggplot(data = gapminder_2007,\n       mapping = aes(x = lifeExp, \n                     y = gdpPercap)) +\n  geom_point(\n    color= \"#9d0208\")\n```\n\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-92-1.png){width=960}\n:::\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(data = gapminder_2007,\n       mapping = aes(x = lifeExp, \n                     y = gdpPercap,\n                     color=continent)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-93-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_point: mapeo de una expresión\n\n<br>\n\n`lifeExp>mean(gapminder_2007$lifeExp)`\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(data = gapminder_2007) +\n  geom_point(mapping = aes(x = lifeExp, \n                           y = gdpPercap,\n                           color= lifeExp>mean(gapminder_2007$lifeExp)\n                           )\n             )\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-95-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_point: mapeo de una expresión 2, local\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(data = gapminder_2007) +\n  geom_point(mapping = aes(x = lifeExp, \n                           y = gdpPercap,\n                           color= continent=='Americas'))\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-97-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_point: mapeo local, tamaño, alpha\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2,3,4,5,6\"}\nggplot(data = gapminder_2007) +\n  geom_point(mapping = aes(x = lifeExp, \n                           y = gdpPercap,\n                           color= continent=='Americas',\n                           size=gdpPercap),\n             alpha=.8)\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-99-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_point: mapeo local tamaño y forma, tema\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4,5,9\"}\nggplot(data = gapminder_2007) +\n  geom_point(mapping = aes(x = lifeExp, \n                           y = gdpPercap,\n                           size=pop,\n                           shape= continent,\n                           ),\n             color= '#386641',\n             alpha=.8)+\n  theme_bw()\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-101-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_point: color por variable ordinal\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"5\"}\nggplot(data = gapminder%>%\n         filter(continent=='Europe')) +\n  geom_point(mapping = aes(x = lifeExp, \n                           y = gdpPercap,\n                           color= year))\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-103-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_point: posición leyenda y tema\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"6,7\"}\nggplot(data = gapminder_2007%>%\n         filter(continent=='Americas')) +\n  geom_point(mapping = aes(x = lifeExp, \n                           y = gdpPercap,\n                           color= country))+\n  theme_dark()+\n  theme(legend.position = \"bottom\")\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-105-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_line\n\n-   Requiere los valores de `x, y` *aesthetics* dentro de `aes()`\n\n-   Se puede modificar la apariciencia de las líneas con los argumentos `color`, `linetype`, `alpha`  \n\n-   El `aes` `group` dibuja líneas de acuerdo a la variable de agrupamiento\n\n## Inspeccionar Datos a Trabajar\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#|echo: true\n#|eval: true\n\n\ndf_valores_acciones%>%\n  sample_n(10)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 10 × 5\n   fecha           volume accion  tipo_valor     valor\n   <date>           <dbl> <chr>   <chr>          <dbl>\n 1 2010-05-05   183975008 Google  adjclose      12.7  \n 2 2024-10-20 18975847518 Bitcoin adjclose   69002.   \n 3 2015-07-14    28727200 Bitcoin open         292.   \n 4 2021-08-12    14646000 Google  low          137.   \n 5 2011-04-07    22723600 Oracle  open          33.6  \n 6 2020-02-20   810052000 Nvidia  adjclose       7.69 \n 7 2007-08-23   667986000 Nvidia  open           0.811\n 8 2016-08-30     6840300 Oracle  low           41.2  \n 9 2023-09-18 15615339655 Bitcoin low        26416.   \n10 2010-08-26    18884700 Oracle  open          22.5  \n```\n\n\n:::\n:::\n\n\n\ncódigo para obtención y procesamiento de datos disponible en [enlace](https://github.com/UCVeconomia2024-2/scripts/blob/main/soporte_clases/clase_21/paquete_pdfetch.R)\n\n## geom_line: 1 línea con color\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\ndf_valores_acciones%>%\n  filter(accion=='Nvidia'& \n           tipo_valor=='close')%>%\n  ggplot(aes(x=fecha,\n             y=valor))+\n  geom_line(color= '#06d6a0')\n#acción Nvidia\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-108-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_line: etiquetas eje y, colores personalizados\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"5,7,8,9,10\"}\ndf_valores_acciones%>%\n  filter(accion!='Bitcoin'& tipo_valor=='close')%>%\n  ggplot(aes(x=fecha,\n             y=valor,\n             color=accion))+\n  geom_line()+\n  scale_y_continuous(labels = scales::label_dollar())+\n  scale_color_manual(values =  \n                       c('#fb8500','#ffb703',\n                         '#023047','#219ebc'))\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-110-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_line: tipo de línea por variable categórica, color línea\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"7,8\"}\ndf_valores_acciones%>%\n  filter(accion=='Apple'& \n           tipo_valor %in% c('high','low') &\n           fecha>'2024/01/01')%>%\n  ggplot(aes(x=fecha,\n             y=valor,\n             linetype = tipo_valor,\n             color=tipo_valor))+\n  geom_line()+\n  scale_y_continuous(labels = scales::label_dollar())+\n  scale_color_manual(values =  c('#fb8500','#023047'))\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-112-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_line: modificación representación fechas, tema\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"10,13,14,15,16,17,18\"}\nlibrary(scales)\ndf_valores_acciones%>%\n  filter(accion=='Apple'& \n           tipo_valor %in% c('high','low') &\n           fecha>'2024/01/01')%>%\n  ggplot(aes(x=fecha,\n             y=valor,\n             linetype = tipo_valor,\n             color=tipo_valor))+\n  geom_line()+\n  scale_y_continuous(labels = scales::label_dollar())+\n  scale_color_manual(values =  c('#fb8500','#023047'))+\n  scale_x_date(date_labels = \"%m/%Y\", date_breaks = \"month\")+\n  theme(axis.text.x = element_text(angle = 45, \n                                   hjust = 1,\n                                   family = \"serif\", \n                                   size = 8),\n        legend.position = 'none')\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-114-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## geom_line: fechas - locales\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"1\"}\nSys.setlocale(\"LC_TIME\", \"es_ES.UTF-8\")\n\ndf_valores_acciones%>%\n  filter(accion=='Apple'& \n           tipo_valor %in% c('high','low') &\n           fecha>'2024/01/01')%>%\n  ggplot(aes(x=fecha,\n             y=valor,\n             linetype = tipo_valor,\n             color=tipo_valor))+\n  geom_line()+\n  scale_y_continuous(labels = scales::label_dollar())+\n  scale_color_manual(values =  c('#fb8500','#023047'))+\n  theme(axis.text.x = element_text(angle = 45,\n                                   hjust = 1,\n                                   family = \"serif\",\n                                   size = 8),\n        legend.position = 'none')\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-116-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## Facetas\n\n<br>\n\nGeneración de un tipo de gráfico con una o dos variables continuas que va iterando sobre una o más variable categórica.\n\n-   Requiere los valores una o más variables en *aesthetics* dentro de `aes()` con el símbolo `~` por cada variable sobre la que se iterará.\n\n-   En *aesthetics* dentro de `aes()` , se puede indicar `nrow` o `ncol` para definir el número de filas y columnas que se generarán.\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"5\"}\nggplot(data = gapminder,\n       mapping = aes(x = lifeExp, \n                     y = gdpPercap)) +\n  geom_smooth(color='#c9184a')+\n  facet_wrap(~continent, nrow=2)+\n  theme_dark()\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-118-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## Facetas boxplot por una variable categórica\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(data = gapminder_2007) +\n  geom_boxplot(aes(y=lifeExp,\n                   color= continent))+\n  facet_wrap(~continent)\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-120-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## Facetas histograma por una variable categórica\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(data = gapminder) +\n  geom_histogram(aes(gdpPercap,\n                     color=continent))+\n  facet_wrap(~continent)\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-122-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## Facetas: 2 variables, tema, smooth\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2,3,4,6\"}\nggplot(data = gapminder,\n       mapping = aes(x = lifeExp, \n                     y = gdpPercap)) +\n  geom_smooth(color='#ca6702')+\n  facet_wrap(~year)+\n  theme_grey()\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-124-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## Facetas con dos columnas\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"5\"}\nggplot(data = gapminder) +\n  geom_point(mapping = aes(x = lifeExp, \n                           y = gdpPercap, \n                           colour= pop))+\n  facet_wrap(~ continent, nrow = 2)\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-126-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## Facetas con dos variables categóricas\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"5\"}\nggplot(data = gapminder_af_am) +\n  geom_point(mapping = aes(x = lifeExp, \n                           y = gdpPercap, \n                           colour= pop))+\n  facet_wrap(country ~ continent)\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-128-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## Facetas por variable categórica y color escala contínua\n\n<br>\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4,5\"}\nggplot(data = gapminder_af_am) +\n  geom_point(mapping = aes(x = lifeExp, \n                           y = gdpPercap, \n                           colour= pop))+\n  facet_wrap(. ~ country)\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-130-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## Otros Gráficos - 2 Variables Categóricas\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngapminder%>%\n  filter(continent=='Americas')%>%\n  ggplot(aes(x=year,\n             y=reorder(country,lifeExp),\n             fill=lifeExp))+\n  geom_tile(color='grey40')+ \n  scale_fill_gradient(low = \"white\",\n                      high = \"#147df5\")\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-132-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n# Estilos Modernos\n\n## Preparar los Datos\n\n<br>\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(\"tidyr\")\n\nmancuerna_df <- gapminder %>%\n  filter(year == 1967 | year == 2007) %>%\n  select(country, year, lifeExp) %>%\n  spread(year, lifeExp) %>%\n  mutate(gap = `2007` - `1967`) %>%\n  arrange(desc(gap)) %>%\n  head(10)\n\nmancuerna_df\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 10 × 4\n   country      `1967` `2007`   gap\n   <fct>         <dbl>  <dbl> <dbl>\n 1 Oman           47.0   75.6  28.7\n 2 Vietnam        47.8   74.2  26.4\n 3 Yemen, Rep.    37.0   62.7  25.7\n 4 Indonesia      46.0   70.6  24.7\n 5 Libya          50.2   74.0  23.7\n 6 Gambia         35.9   59.4  23.6\n 7 Saudi Arabia   49.9   72.8  22.9\n 8 Nepal          41.5   63.8  22.3\n 9 Egypt          49.3   71.3  22.0\n10 Tunisia        52.1   73.9  21.9\n```\n\n\n:::\n:::\n\n\n\n## Gráfico de Mancuerna\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(ggalt)\nlibrary(bbplot)\n\nggplot(mancuerna_df, \n       aes(x = `1967`, \n           xend = `2007`, \n           y = reorder(country, gap),\n           group = country)) + \n  geom_dumbbell(colour = \"#dddddd\",\n                size = 3,\n                colour_x = \"#FAAB18\",\n                colour_xend = \"#1380A1\") +\n  bbc_style() +\n  labs(title=\"Vivimos más Tiempo\",\n       subtitle=\"Mayor crecimiento en la expectativa de vida, 1967-2007\",\n       x=NULL,\n       y=NULL)\n```\n\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-134-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n## Gráficos Interactivos\n\n<br>\n\nPreparar el gráfico\n\n::::: columns\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngap_2007_amer_le_gp <- ggplot(data = gapminder_2007%>%\n                                filter(continent=='Americas')) +\n  geom_point(mapping = aes(x = lifeExp, \n                           y = gdpPercap, \n                           size = pop,\n                           colour = country))+\n  theme_light()+\n  theme(legend.position = \"bottom\")+\n  labs(title = \"Gapminder 2007 Américas: lifeExp ~  gdpPercap\",\n       x = \"Expectativa de Vida\",\n       y = \"PIB Percápita\",\n       caption='conjunto de datos: Gapminder por Hans Roslig',\n       tag='Fig. 1') \n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](clase_21_files/figure-revealjs/unnamed-chunk-136-1.png){width=960}\n:::\n:::\n\n\n:::\n:::::\n\n## Añadir Interactividad\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(plotly)\ngap_2007_amer_le_gp%>%\n  ggplotly()\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-163175ec9ae4f195b7b4\" style=\"width:960px;height:576px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-163175ec9ae4f195b7b4\">{\"x\":{\"data\":[{\"x\":[75.319999999999993],\"y\":[12779.379639999999],\"text\":\"lifeExp: 75.320<br />gdpPercap: 12779.380<br />pop:  40301927<br />country: Argentina\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"opacity\":1,\"size\":10.613614678054821,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(248,118,109,1)\"}},\"hoveron\":\"points\",\"name\":\"Argentina\",\"legendgroup\":\"Argentina\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[65.554000000000002],\"y\":[3822.137084],\"text\":\"lifeExp: 65.554<br />gdpPercap:  3822.137<br />pop:   9119152<br />country: Bolivia\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(237,129,65,1)\",\"opacity\":1,\"size\":6.8771082460152693,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(237,129,65,1)\"}},\"hoveron\":\"points\",\"name\":\"Bolivia\",\"legendgroup\":\"Bolivia\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[72.390000000000001],\"y\":[9065.8008250000003],\"text\":\"lifeExp: 72.390<br />gdpPercap:  9065.801<br />pop: 190010647<br />country: Brazil\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(224,139,0,1)\",\"opacity\":1,\"size\":18.775155924206555,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(224,139,0,1)\"}},\"hoveron\":\"points\",\"name\":\"Brazil\",\"legendgroup\":\"Brazil\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[80.653000000000006],\"y\":[36319.235009999997],\"text\":\"lifeExp: 80.653<br />gdpPercap: 36319.235<br />pop:  33390141<br />country: Canada\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(207,148,0,1)\",\"opacity\":1,\"size\":9.9826900801015785,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(207,148,0,1)\"}},\"hoveron\":\"points\",\"name\":\"Canada\",\"legendgroup\":\"Canada\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[78.552999999999997],\"y\":[13171.638849999999],\"text\":\"lifeExp: 78.553<br />gdpPercap: 13171.639<br />pop:  16284741<br />country: Chile\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(187,157,0,1)\",\"opacity\":1,\"size\":8.0365889150245629,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(187,157,0,1)\"}},\"hoveron\":\"points\",\"name\":\"Chile\",\"legendgroup\":\"Chile\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[72.888999999999996],\"y\":[7006.5804189999999],\"text\":\"lifeExp: 72.889<br />gdpPercap:  7006.580<br />pop:  44227550<br />country: Colombia\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(163,165,0,1)\",\"opacity\":1,\"size\":10.947269177752579,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(163,165,0,1)\"}},\"hoveron\":\"points\",\"name\":\"Colombia\",\"legendgroup\":\"Colombia\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[78.781999999999996],\"y\":[9645.06142],\"text\":\"lifeExp: 78.782<br />gdpPercap:  9645.061<br />pop:   4133884<br />country: Costa Rica\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(133,173,0,1)\",\"opacity\":1,\"size\":5.6932096997412867,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(133,173,0,1)\"}},\"hoveron\":\"points\",\"name\":\"Costa Rica\",\"legendgroup\":\"Costa Rica\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[78.272999999999996],\"y\":[8948.1029230000004],\"text\":\"lifeExp: 78.273<br />gdpPercap:  8948.103<br />pop:  11416987<br />country: Cuba\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(91,179,0,1)\",\"opacity\":1,\"size\":7.2908798209805168,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(91,179,0,1)\"}},\"hoveron\":\"points\",\"name\":\"Cuba\",\"legendgroup\":\"Cuba\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[72.234999999999999],\"y\":[6025.3747519999997],\"text\":\"lifeExp: 72.235<br />gdpPercap:  6025.375<br />pop:   9319622<br />country: Dominican Republic\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,184,32,1)\",\"opacity\":1,\"size\":6.9153814782504197,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,184,32,1)\"}},\"hoveron\":\"points\",\"name\":\"Dominican Republic\",\"legendgroup\":\"Dominican Republic\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[74.994],\"y\":[6873.262326],\"text\":\"lifeExp: 74.994<br />gdpPercap:  6873.262<br />pop:  13755680<br />country: Ecuador\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,188,89,1)\",\"opacity\":1,\"size\":7.6670469809142006,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,188,89,1)\"}},\"hoveron\":\"points\",\"name\":\"Ecuador\",\"legendgroup\":\"Ecuador\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[71.878],\"y\":[5728.3535140000004],\"text\":\"lifeExp: 71.878<br />gdpPercap:  5728.354<br />pop:   6939688<br />country: El Salvador\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,191,125,1)\",\"opacity\":1,\"size\":6.4255221743432624,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,191,125,1)\"}},\"hoveron\":\"points\",\"name\":\"El Salvador\",\"legendgroup\":\"El Salvador\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[70.259],\"y\":[5186.0500030000003],\"text\":\"lifeExp: 70.259<br />gdpPercap:  5186.050<br />pop:  12572928<br />country: Guatemala\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,193,156,1)\",\"opacity\":1,\"size\":7.4815874551191142,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,193,156,1)\"}},\"hoveron\":\"points\",\"name\":\"Guatemala\",\"legendgroup\":\"Guatemala\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[60.915999999999997],\"y\":[1201.637154],\"text\":\"lifeExp: 60.916<br />gdpPercap:  1201.637<br />pop:   8502814<br />country: Haiti\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,192,184,1)\",\"opacity\":1,\"size\":6.7563580294955159,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,192,184,1)\"}},\"hoveron\":\"points\",\"name\":\"Haiti\",\"legendgroup\":\"Haiti\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[70.197999999999993],\"y\":[3548.3308459999998],\"text\":\"lifeExp: 70.198<br />gdpPercap:  3548.331<br />pop:   7483763<br />country: Honduras\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,189,208,1)\",\"opacity\":1,\"size\":6.5451695838618908,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,189,208,1)\"}},\"hoveron\":\"points\",\"name\":\"Honduras\",\"legendgroup\":\"Honduras\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[72.566999999999993],\"y\":[7320.8802619999997],\"text\":\"lifeExp: 72.567<br />gdpPercap:  7320.880<br />pop:   2780132<br />country: Jamaica\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,184,229,1)\",\"opacity\":1,\"size\":5.2116997831367673,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,184,229,1)\"}},\"hoveron\":\"points\",\"name\":\"Jamaica\",\"legendgroup\":\"Jamaica\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[76.194999999999993],\"y\":[11977.57496],\"text\":\"lifeExp: 76.195<br />gdpPercap: 11977.575<br />pop: 108700891<br />country: Mexico\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,176,246,1)\",\"opacity\":1,\"size\":15.097850039940255,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,176,246,1)\"}},\"hoveron\":\"points\",\"name\":\"Mexico\",\"legendgroup\":\"Mexico\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[72.899000000000001],\"y\":[2749.3209649999999],\"text\":\"lifeExp: 72.899<br />gdpPercap:  2749.321<br />pop:   5675356<br />country: Nicaragua\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,165,255,1)\",\"opacity\":1,\"size\":6.1240193305920405,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,165,255,1)\"}},\"hoveron\":\"points\",\"name\":\"Nicaragua\",\"legendgroup\":\"Nicaragua\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[75.537000000000006],\"y\":[9809.1856360000002],\"text\":\"lifeExp: 75.537<br />gdpPercap:  9809.186<br />pop:   3242173<br />country: Panama\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(121,151,255,1)\",\"opacity\":1,\"size\":5.3922827283358492,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(121,151,255,1)\"}},\"hoveron\":\"points\",\"name\":\"Panama\",\"legendgroup\":\"Panama\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[71.751999999999995],\"y\":[4172.8384640000004],\"text\":\"lifeExp: 71.752<br />gdpPercap:  4172.838<br />pop:   6667147<br />country: Paraguay\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(172,136,255,1)\",\"opacity\":1,\"size\":6.363505916234117,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(172,136,255,1)\"}},\"hoveron\":\"points\",\"name\":\"Paraguay\",\"legendgroup\":\"Paraguay\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[71.421000000000006],\"y\":[7408.9055609999996],\"text\":\"lifeExp: 71.421<br />gdpPercap:  7408.906<br />pop:  28674757<br />country: Peru\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(207,120,255,1)\",\"opacity\":1,\"size\":9.5125529225874956,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(207,120,255,1)\"}},\"hoveron\":\"points\",\"name\":\"Peru\",\"legendgroup\":\"Peru\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[78.745999999999995],\"y\":[19328.709009999999],\"text\":\"lifeExp: 78.746<br />gdpPercap: 19328.709<br />pop:   3942491<br />country: Puerto Rico\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(231,107,243,1)\",\"opacity\":1,\"size\":5.6327431231085665,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(231,107,243,1)\"}},\"hoveron\":\"points\",\"name\":\"Puerto Rico\",\"legendgroup\":\"Puerto Rico\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[69.819000000000003],\"y\":[18008.509239999999],\"text\":\"lifeExp: 69.819<br />gdpPercap: 18008.509<br />pop:   1056608<br />country: Trinidad and Tobago\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(247,99,224,1)\",\"opacity\":1,\"size\":3.7795275590551185,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(247,99,224,1)\"}},\"hoveron\":\"points\",\"name\":\"Trinidad and Tobago\",\"legendgroup\":\"Trinidad and Tobago\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[78.242000000000004],\"y\":[42951.65309],\"text\":\"lifeExp: 78.242<br />gdpPercap: 42951.653<br />pop: 301139947<br />country: United States\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(255,97,201,1)\",\"opacity\":1,\"size\":22.677165354330711,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(255,97,201,1)\"}},\"hoveron\":\"points\",\"name\":\"United States\",\"legendgroup\":\"United States\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[76.384],\"y\":[10611.46299],\"text\":\"lifeExp: 76.384<br />gdpPercap: 10611.463<br />pop:   3447496<br />country: Uruguay\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(255,101,174,1)\",\"opacity\":1,\"size\":5.4663376683169176,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(255,101,174,1)\"}},\"hoveron\":\"points\",\"name\":\"Uruguay\",\"legendgroup\":\"Uruguay\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[73.747],\"y\":[11415.805689999999],\"text\":\"lifeExp: 73.747<br />gdpPercap: 11415.806<br />pop:  26084662<br />country: Venezuela\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(255,108,144,1)\",\"opacity\":1,\"size\":9.2371076862319477,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(255,108,144,1)\"}},\"hoveron\":\"points\",\"name\":\"Venezuela\",\"legendgroup\":\"Venezuela\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":45.710806697108069,\"r\":7.3059360730593621,\"b\":42.130898021308987,\"l\":54.794520547945211},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"Gapminder 2007 Américas: lifeExp ~  gdpPercap\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[59.929149999999993,81.63985000000001],\"tickmode\":\"array\",\"ticktext\":[\"60\",\"65\",\"70\",\"75\",\"80\"],\"tickvals\":[60,65,70,75,80],\"categoryorder\":\"array\",\"categoryarray\":[\"60\",\"65\",\"70\",\"75\",\"80\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(179,179,179,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.33208800332088001,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(222,222,222,1)\",\"gridwidth\":0.33208800332088001,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Expectativa de Vida\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-885.86364279999998,45039.153886799999],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"10000\",\"20000\",\"30000\",\"40000\"],\"tickvals\":[-1.1368683772161603e-13,10000,20000,29999.999999999996,40000],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"10000\",\"20000\",\"30000\",\"40000\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(179,179,179,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.33208800332088001,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(222,222,222,1)\",\"gridwidth\":0.33208800332088001,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"PIB Percápita\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":\"transparent\",\"line\":{\"color\":\"rgba(179,179,179,1)\",\"width\":0.66417600664176002,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"pop<br />country\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"1329d4142a167\":{\"x\":{},\"y\":{},\"size\":{},\"colour\":{},\"type\":\"scatter\"}},\"cur_data\":\"1329d4142a167\",\"visdat\":{\"1329d4142a167\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n## Guardar Gráficos\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(graf_gap_2007,\n       filename= 'graf_gap_2007.png')\n\nggsave(graf_gap_2007,\n       width= 8,\n       height = 5,\n       dpi=2400,\n       filename='graf_gap_2007.png')\n```\n:::\n\n\n\n## Elección del Mapeo (Mapping)\n\n![](images/clase21/choosing_a_mapping%20.png){fig-align=\"center\" width=\"600\"}\n\nImagen de Garrett Grolemund's 2019 JSM, tidyverse tutorial .\n\n## Elección Tipo Gráfico\n\n![](images/clase21/cual_ggplot.png){fig-align=\"center\" width=\"500\"}\n\ntomado de la presentación \"a `ggplot2` Crash Course\" de Samantha Tyner.\n\n## Láminas repaso\n\n-   `ggplot2` es una potente biblioteca para el diseño gráfico reproducible\n\n-   los componentes siguen una sintaxis consistente\n\n-   cada ggplot necesita al menos datos, algo de estética y una capa\n\n-   establecemos propiedades constantes fuera de aes()\n\n-   ... y mapeamos las propiedades relacionadas con los datos dentro de aes()\n\n-   los ajustes y mapeos locales anulan las propiedades globales\n\n-   la agrupación permite aplicar capas a subconjuntos\n\n-   podemos almacenar un objeto ggplot y extenderlo hacia el exterior\n\n-   podemos cambiar la apariencia de todos los gráficos con theme_set() y theme_update()\n\n*basadas en presentación de Cédric Scherer*\n\n## Recursos\n\n<https://ggplot2-book.org/>\n\n<https://bbc.github.io/rcookbook/>\n\n<https://r-charts.com/es/ggplot2/>\n\n<https://ggplot2.tidyverse.org/>\n",
    "supporting": [
      "clase_21_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../site_libs/plotly-binding-4.10.4/plotly.js\"></script>\n<script src=\"../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n<link href=\"../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}
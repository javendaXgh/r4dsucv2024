---
title: "Clase 8- Inspeccionar Data Frames"
date: "Noviembre 11, 2024"
output:
  html_document:
    toc: yes
execute:
  echo: true
  eval: true
  warning: false
---

## Objetivos de la Actividad

-   Presentar operadores l贸gicos y trabajar con ellos

-   Acceder a elementos de vectores y DF's seg煤n condiciones l贸gicas

-   Inspeccionar valores, rangos y estructura de una DF

## Tabla de Contingencia

Conteo de frecuencia de un dato categ贸rico

```{r}

table(mtcars$cyl)
```

## Tabla de Contingencia Cruzada

M煤ltiples categor铆as

|       |                                     |
|:------|:------------------------------------|
| `cyl` | Number of cylinders                 |
| `vs`  | Engine (0 = V-shaped, 1 = straight) |

```{r}
table(mtcars$cyl, mtcars$vs)
```

## Tabla Resumen Estad铆stico

Representar los valores m铆nimo y m谩ximo, primer y tercer cuartil, media, promedio de un vector o data frame.

```{r}
summary(mtcars$mpg)
```

## Tabla Resumen Estad铆stico - cont

La salida de funci贸n `summary` cambia seg煤n el objeto que estemos trabajando

```{r}
summary(mtcars)
```

## Operadores L贸gicos

-   $>$ (mayor a)
-   $>=$ (mayor o igual a)
-   $<$ (menor a)
-   $<=$ (menor o igual a)
-   $==$ (igual a)
-   $!=$ (distinto a)
-   & (y)
-   $|$ (o)

## Uso de Operadores L贸gicos en un Vector

Vector seleccionado "millas por gal贸n" `mpg`

```{r}
mtcars$mpg
```

## Vector L贸gico con valores que Cumplen una Condici贸n

Mayor que un valor dado

```{r}
  mtcars$mpg>19.20
```

Mayor que el valor que retorna una funci贸n

```{r}
mtcars$mpg>mean(mtcars$mpg)
```

## Asignaci贸n valores a variables

-   variable con promedio

-   creaci贸n DF

-   evaluar valores que cumplen ambas condiciones

```{r}
promedio_mpg <- mean(mtcars$mpg)
valor_3ercuartil <- 33.90 

df_mpg <- data.frame(mpg= mtcars$mpg,
                     may_mean= mtcars$mpg>promedio_mpg,
                     men_3cuar= mtcars$mpg<valor_3ercuartil )


```

## Inspecci贸n df

```{r}
df_mpg
```

## Forma Vectorizada:

Se aplica el condicional l贸gico sobre el elemento *i* del vector analizado teniendo de resultado un vector del mismo `length` del vector de entrada.

Por ejemplo, si *i* vale 3, se compara si 22.8 es mayor que el `promedio_mpg` **y** si es menor que `valor_3ercuartil`

```{r}
mtcars$mpg>promedio_mpg & mtcars$mpg<valor_3ercuartil 
```

## M煤ltiples Condiciones

Operador `&` (y)

```{r}
mtcars$mpg[mtcars$mpg>promedio_mpg & mtcars$mpg<valor_3ercuartil ]
```

Operador `==` doble igualdad ( es distinto a asignaci贸n)

```{r}
 which (mtcars$mpg == 19.2  )
```

`which` indica el 铆ndice de los elementos extra铆dos seg煤n una condici贸n

```{r}
mtcars[ mtcars$mpg==21, ]
```

Operador `!=` diferente

```{r}
mtcars[mtcars$mpg!=21,c(1,4:6)]
```

Operador `|` or (o)

```{r}
mtcars[which(mtcars$mpg==21 | mtcars$mpg==22.8),1:3]
```

## Data Frame a Trabajar

```{r}
# View(datasets::LifeCycleSavings)
```

```         
Sobre el contenido de la df: seg煤n la hip贸tesis del ahorro a lo largo del ciclo vital desarrollada por Franco Modigliani, el coeficiente de ahorro (ahorro personal agregado dividido por la renta disponible) se explica por la renta disponible per c谩pita, la tasa porcentual de variaci贸n de la renta disponible per c谩pita y dos variables demogr谩ficas: el porcentaje de poblaci贸n menor de 15 a帽os y el porcentaje de poblaci贸n mayor de 75 a帽os. Los datos se promedian a lo largo de la d茅cada 1960-1970 para eliminar el ciclo econ贸mico u otras fluctuaciones a corto plazo
```

## Asignar a una variable la DF

```{r}
df_ahorro <- datasets::LifeCycleSavings
head(df_ahorro, 8)
```

## Inspecci贸n Data Frame

Dimensiones

```{r}
dim(df_ahorro)
```

N煤mero de columnas

```{r}
ncol(df_ahorro)
```

N煤mero de filas

```{r}
nrow(df_ahorro)
```

Nombres de las columnas

```{r}
colnames(df_ahorro)
```

Nombres de las filas

```{r}
rownames(df_ahorro)
```

Estructura de un objeto

```{r}
str(df_ahorro)
```

Resumen Estad铆stico

```{r}
summary(df_ahorro)
```

## Crear columna con nombre pa铆ses

Revisar nombres filas

```{r}
rownames(df_ahorro)[1:10]
```

Asignar nueva columa a la DF

```{r}
df_ahorro$pais <- rownames(df_ahorro)
```

## Crear Columna con Valor Promedio

Con los valores correspondientes a pop15 y pop75 obtener promedio por cada observaci贸n

```{r}
df_ahorro$edad_promedio <- mean(c(df_ahorro$pop15, df_ahorro$pop75))
```

## Inspecci贸n Nuevos Atributos

Revisar DF

```{r}
head(df_ahorro, 5)
```

## Funciones Valores Extremos

M铆nimo en vector

```{r}
min(df_ahorro$pop15)
```

M谩ximo en vector

```{r}
max(df_ahorro$pop15)
```

## Importar en Formato csv una Data Frame

```{r}
df_gapminder <- read.csv('https://raw.githubusercontent.com/javendaXgh/datos/refs/heads/master/gapminder.csv') 

```

```{r}
head(df_gapminder,3)
```

: los datos tienen estructura tabular. Observaciones son filas y atributos las columnas

## Estructura Gapminder

Estructura DF

```{r}
str(df_gapminder)
```

## Tabla Sumario Gapminder

```{r}
summary(df_gapminder)
```

::: notes
Tiene estructura tabular
:::

## Valores nicos por Atributo

Pa铆ses

```{r}
unique(df_gapminder$country)
```

A帽os

```{r}
unique(df_gapminder$year)
```

## DPLYR ( de batalla)

```{r}
library(dplyr)
```

## DPLYR / Filtrado

Funci贸n `filter`.

```{r}
df_venezuela <- df_gapminder %>%
  filter(country=='Venezuela')

df_venezuela
```

## Revisar Tabla Venezuela

Tabla sumario

```{r}
summary(df_venezuela)
```

## Juntar DF麓s

```{r}
df_colombia <- df_gapminder %>%
  filter(country=='Colombia')

df_colombia
```

## Combinar DF's

Funci贸n `bind_rows`

```{r}
df_gran_colombia <- bind_rows(df_venezuela,
                              df_colombia )
```

## Revisar Nueva DF

```{r}
df_gran_colombia
```

## Continuar Inspecci贸n...

---
title: "Ciencia de Datos para Economistas"
subtitle: "Clase 8- Inspeccionar Data Frames"
date: "Noviembre 11, 2024"
author: "MSc. Jos茅 M. Avenda帽o"
# output:
#   html_document:
#     toc: yes
filters:
  - webr
engine: knitr
format: 
  revealjs:
    incremental: true   
# execute: 
#   echo: true
  # eval: false
---

## Varios y Puntos Pendientes

::: notes
intervenciones en clase 13-11 sobre la visualizaciones que se hagan con ggplot2 que viene de tarea clase 5. Cambio de fecha del 11-11 al 13-11

Modificaci贸n tarea clase 5 ggplot

Tareas clase 7 (entrega 13 y 18) y clase 8 (20-11)

Clase 6 pr谩ctica 1 construccion vectores
:::

## Objetivo

-   Presentar operadores l贸gicos y trabajar con ellos

-   Acceder a elementos de vectores y DF's seg煤n condiciones l贸gicas

-   Inspeccionar valores, rangos y estructura de una DF

## Tabla de Contingencia

Cantidad cilindros por observaci贸n

```{web-r}

mtcars$cyl
```

Conteo de frecuencia de un dato categ贸rico

```{webr-r}

table(mtcars$cyl)
```

## Tabla de Contingencia Cruzada

M煤ltiples categor铆as

|       |                                     |
|:------|:------------------------------------|
| `cyl` | Number of cylinders                 |
| `vs`  | Engine (0 = V-shaped, 1 = straight) |

```{webr-r}
table(mtcars$cyl, mtcars$vs)
```

## Tabla Resumen Estad铆stico

Representar los valores m铆nimo y m谩ximo, primer y tercer cuartil, media, promedio de un vector o data frame.

```{webr-r}
summary(mtcars$mpg)
```

## Tabla Resumen Estad铆stico - cont

La salida de funci贸n `summary` cambia seg煤n el objeto que estemos trabajando

```{webr-r}
summary(mtcars)
```

## Operadores L贸gicos

-   $>$ (mayor a)
-   $>=$ (mayor o igual a)
-   $<$ (menor a)
-   $<=$ (menor o igual a)
-   $==$ (igual a)
-   $!=$ (distinto a)
-   & (y)
-   $|$ (o)

## Uso de Operadores L贸gicos en un Vector

Vector seleccionado "millas por gal贸n" `mpg`

```{webr-r}
mtcars$mpg
```

## Vector L贸gico con valores que Cumplen una Condici贸n

Mayor que un valor dado

```{webr-r}
  mtcars$mpg>19.20
```

## Vector L贸gico con valores que Cumplen una Condici贸n -cont.

<br> Mayor que el valor que retorna una funci贸n

```{webr-r}
mtcars$mpg>mean(mtcars$mpg)
```

## Asignaci贸n valores a variables

-   variable con promedio

-   creaci贸n df

-   evaluar valores que cumplen ambas condiciones

```{webr-r}
promedio_mpg <- mean(mtcars$mpg)
valor_3ercuartil <- 33.90 

df_mpg <- data.frame(mpg= mtcars$mpg,
                     may_mean= mtcars$mpg>promedio_mpg,
                     men_3cuar= mtcars$mpg<valor_3ercuartil )


```

Reforzar con lectura propuesta en Tarea Clase 8 sobre "[Tabla de Verdad](https://es.wikipedia.org/wiki/Tabla_de_verdad)".

## Inspecci贸n DF que Cumple Condiciones

```{webr-r}
df_mpg
```

## Forma vectorizada:

Se aplica el condicional l贸gico sobre el elemento *i* del vector analizado teniendo de resultado un vector del mismo `length` del vector de entrada.

Por ejemplo, si *i* vale 3, se compara si 22.8 es mayor que el `promedio_mpg` **y** si es menor que `valor_3ercuartil`

```{webr-r}
mtcars$mpg>promedio_mpg & mtcars$mpg<valor_3ercuartil 
```

## M煤ltiples Condiciones

Operador `&` (y)

```{webr-r}
mtcars$mpg[mtcars$mpg>promedio_mpg & mtcars$mpg<valor_3ercuartil ]
```

<br> Operador `==` doble igualdad ( es distinto a asignaci贸n)

```{webr-r}
 which (mtcars$mpg == 19.2  )
```

`which` indica el 铆ndice de los elementos extra铆dos seg煤n una condici贸n

## M煤ltiples Condiciones - cont

```{webr-r}
mtcars[ mtcars$mpg==21, ]
```

<br> Operador `!=` diferente

```{webr-r}
mtcars[mtcars$mpg!=21,c(1,4:6)]
```

## M煤ltiples Condiciones - cont 2

<br> Operador `|` or (o)

```{webr-r}
mtcars[which(mtcars$mpg==21 | mtcars$mpg==22.8),1:3]
```

## Data Frame a Trabajar

```{webr-r}
# View(datasets::LifeCycleSavings)
```

```         
Sobre el contenido de la df: seg煤n la hip贸tesis del ahorro a lo largo del ciclo vital desarrollada por Franco Modigliani, el coeficiente de ahorro (ahorro personal agregado dividido por la renta disponible) se explica por la renta disponible per c谩pita, la tasa porcentual de variaci贸n de la renta disponible per c谩pita y dos variables demogr谩ficas: el porcentaje de poblaci贸n menor de 15 a帽os y el porcentaje de poblaci贸n mayor de 75 a帽os. Los datos se promedian a lo largo de la d茅cada 1960-1970 para eliminar el ciclo econ贸mico u otras fluctuaciones a corto plazo
```

## Asignar a una variable la DF

```{webr-r}
df_ahorro <- datasets::LifeCycleSavings
head(df_ahorro, 8)
```

## Inspecci贸n Data Frame

Dimensiones

```{webr-r}
dim(df_ahorro)
```

<br> N煤mero de columnas

```{webr-r}
ncol(df_ahorro)
```

## Inspecci贸n Data Frame -cont

N煤mero de filas

```{webr-r}
nrow(df_ahorro)
```

<br> Nombres de las columnas

```{webr-r}
colnames(df_ahorro)
```

## Inspecci贸n Data Frame -cont2

<br> Nombres de las filas

```{webr-r}
rownames(df_ahorro)
```

## Inspecci贸n Data Frame -cont3

Estructura de un objeto

```{webr-r}
str(df_ahorro)
```

## Inspecci贸n Data Frame -cont4

<br> Resumen Estad铆stico

```{webr-r}
summary(df_ahorro)
```

## Crear Columna con Nombre Pa铆ses

Revisar nombres filas

```{webr-r}
rownames(df_ahorro)[1:10]
```

<br> Asignar nueva columa a la DF

```{webr-r}
df_ahorro$pais <- rownames(df_ahorro)
```



## Inspecci贸n Nuevo Atributo

Revisar DF

```{webr-r}
head(df_ahorro, 5)
```

## Funciones Valores Extremos

M铆nimo en vector

```{webr-r}
min(df_ahorro$pop15)
```

<br> M谩ximo en vector

```{webr-r}
max(df_ahorro$pop15)
```

## Importar en Formato csv una Data Frame

```{webr-r}
df_gapminder <- read.csv('https://raw.githubusercontent.com/javendaXgh/datos/refs/heads/master/gapminder.csv') 

```

<br>

```{webr-r}
head(df_gapminder,3)
```

: los datos tienen estructura tabular. Observaciones son filas y atributos las columnas

## Estructura Gapminder

Estructura DF

```{webr-r}
str(df_gapminder)
```

## Tabla Sumario Gapminder

```{webr-r}
summary(df_gapminder)
```

::: notes
Tiene estructura tabular
:::

## Valores nicos por Atributo

Pa铆ses

```{webr-r}
unique(df_gapminder$country)
```

## Valores nicos por Atributo - cont

<br> A帽os

```{webr-r}
unique(df_gapminder$year)
```

## DPLYR ( de batalla)

Una gram谩tica para la manipulaci贸n de datos.

```{webr-r}
library(dplyr)
```

## DPLYR / Filtrado

Funci贸n `filter`.

Encadenamiento en los procesamientos: operador pipe `%>%`

```{webr-r}
df_venezuela <- df_gapminder %>%
  filter(country=='Venezuela')

df_venezuela
```

## Revisar Tabla Venezuela

Tabla sumario

```{webr-r}
summary(df_venezuela)
```

## Juntar DF麓s

```{webr-r}
df_colombia <- df_gapminder %>%
  filter(country=='Colombia')

df_colombia
```

## Combinar DF's

Funci贸n `bind_rows`

```{webr-r}
df_gran_colombia <- bind_rows(df_venezuela,
                              df_colombia )
```

## Revisar Nueva DF

```{webr-r}
df_gran_colombia
```

## Continuar Inspecci贸n...
